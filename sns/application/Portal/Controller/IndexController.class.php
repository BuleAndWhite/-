<?php
// +----------------------------------------------------------------------
// | ThinkPHP [ WE CAN DO IT JUST THINK IT ]
// +----------------------------------------------------------------------
// | Copyright (c) 2015-2016 http://www.anzaisoft.net All rights reserved.
// +----------------------------------------------------------------------
// | Author: ZhangQingYuan <767684610@qq.com>
// +----------------------------------------------------------------------
namespace Portal\Controller;

use Common\Controller\HomebaseController;

class IndexController extends HomebaseController
{

    protected $term_relationships_model;

    function _initialize()
    {
        parent::_initialize();
        $this->term_relationships_model = D("Portal/TermRelationships");
    }

    //首页
    public function index()
    {
        header("Content-type: text/html; charset=utf-8");

        //获取推荐活动
        $activities = $this->recommendedActivities();

        //获取比赛推荐
        $competition = $this->recommendationCompetition();

        print_r($competition);
        //$json = '{"today":{"qty":2807,"enters":2616,"amount":646280.00,"cash":286420.00,"visa":282220.00,"wechat":31180.00,"alipay":46460.00},"hourqty":{"hour":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],"sellqty":[2,0,2,0,0,0,0,0,200,109,283,478,342,431,227,200,196,298,39],"enterqty":[0,0,0,0,0,0,0,0,0,113,343,538,367,233,379,238,246,92,90]},"houramount":{"hour":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],"cash":[0.00,0,0.00,0,0,0,0,0,40000.00,620.00,11620.00,52800.00,46940.00,44000.00,2540.00,15100.00,15600.00,57200.00,0.00],"visa":[0.00,0,0.00,0,0,0,0,0,0.00,19980.00,45460.00,40000.00,27300.00,44320.00,44960.00,28360.00,21880.00,7840.00,2120.00],"wechat":[520.00,0,0.00,0,0,0,0,0,0.00,1280.00,3620.00,6480.00,7220.00,6260.00,3320.00,4080.00,6340.00,1400.00,5940.00],"alipay":[0.00,0,520.00,0,0,0,0,0,0.00,440.00,0.00,4360.00,5740.00,7560.00,4280.00,2700.00,5140.00,0.00,440.00]},"daysqty":{"days":["2016-07-07","2016-07-08","2016-07-09","2016-07-10","2016-07-11","2016-07-12","2016-07-13","2016-07-14","2016-07-15","2016-07-16"],"sellqty":[1216,1031,1063,747,347,1407,2129,860,1983,2807],"enterqty":[1259,1032,1054,738,305,1379,2194,1243,2053,2640]},"daysamount":{"hour":["2016-07-07","2016-07-08","2016-07-09","2016-07-10","2016-07-11","2016-07-12","2016-07-13","2016-07-14","2016-07-15","2016-07-16"],"cash":[73670.00,66600.00,8140.00,2440.00,2600.00,900.00,208750.00,73480.00,175750.00,286420.00],"visa":[81720.00,74900.00,186840.00,122280.00,45480.00,211060.00,143410.00,57980.00,126510.00,282220.00],"wechat":[35680.00,27120.00,29040.00,25100.00,14330.00,28480.00,22500.00,18200.00,35540.00,46460.00],"alipay":[15060.00,8640.00,21260.00,22440.00,3940.00,19400.00,15340.00,8510.00,27300.00,31180.00]}}';
        //dump(file_get_contents('http://180.168.78.106:36854/function/returnjson/jsonlist.aspx'));
        $json = file_get_contents('http://180.168.78.106:36854/function/returnjson/jsonlist.aspx');
        $this->list_data = json_decode($json, true);

        $this->display(':morris');
    }

    public function morris()
    {
        $this->display(':morris');
    }

}


